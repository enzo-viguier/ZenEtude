{% extends 'base.html.twig' %}
{% block title %}Dashboard{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css">
{% endblock %}

{% block javascripts %}
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@2.8.2/dist/alpine.min.js" defer></script>
{% endblock %}

{% block body %}
    {{ include('_nav.html.twig') }}
    <div x-data="{ showPopup: false }" class="min-h-screen bg-gray-800 text-white"> <!-- Dark gray background -->

        <header class="py-12">
            <div class="mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8">
                <div class="flex justify-center items-center">
                    <div class="text-center">
                        <h1 class="text-2xl font-bold sm:text-3xl">{{ app.session.get('username') }}!</h1>
                        <p class="mt-5">ZenEtude estime de état de santé ❤️ à :</p>
                        <div class="mt-5">
                            <span role="progressbar" aria-labelledby="ProgressLabel" aria-valuenow="100" class="block rounded-full bg-gray-300" style="width: 110%"></span>
                            <span class="block h-4 rounded-full bg-indigo-600 text-center" style="width: 100%"><span class="font-bold text-white">100%</span></span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <div class="py-8">
            <div class="mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-2xl font-bold mb-6">Série actuelle: <span class="text-indigo-500">5 Jours</span></h2>
                    <div class="flex justify-center items-center space-x-4">
                        {% set current_day = "now"|date("D") %}
                        {% set days = {'Mon': 'Lu', 'Tue': 'Ma', 'Wed': 'Me', 'Thu': 'Je', 'Fri': 'Ve'} %}
                        {% for day, label in days %}
                            <div class="bg-gray-700 hover:bg-red-500 rounded-full w-12 h-12 flex items-center justify-center text-sm font-medium transition-all mx-1 {{ current_day == day ? 'bg-red-500 text-white' : 'bg-indigo-500 text-white cursor-pointer' }}">
                                {{ label }}
                            </div>
                        {% endfor %}
                    </div>
                    <div class="mt-8">
                        <button @click="showPopup = true" class="rounded-lg bg-indigo-600 px-8 py-3 text-lg font-medium hover:bg-indigo-700 focus:outline-none focus:ring transition-all">Faire le Questionnaire Quotidien !</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Popup -->
        <div x-show="showPopup" @click.away="showPopup = false" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
            <!-- Popup content here -->
            <div class="bg-white rounded-lg p-8 w-[500px] h-[300px]">
                <!-- Close button -->
                <button @click="showPopup = false" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <!-- Form -->
                <form class="w-80" @click.away="showPopup = false">
                    <!-- Vos questions vont ici -->
                    <label class="text-black" for="question1">Comment vous sentez-vous aujourd'hui ?</label>
                    <input type="text" id="question1" name="question1" class="block w-full rounded-lg bg-gray-100 mt-2">

                    <label class="text-black" for="question2">Avez-vous bien dormi la nuit dernière ?</label>
                    <input type="text" id="question2" name="question2" class="block w-full rounded-lg bg-gray-100 mt-2">

                    <label class="text-black" for="question3">Avez-vous mangé des repas sains ?</label>
                    <input type="text" id="question3" name="question3" class="block w-full rounded-lg bg-gray-100 mt-2">

                    <label class="text-black" for="question4">Avez-vous fait de l'activité physique aujourd'hui ?</label>
                    <input type="text" id="question4" name="question4" class="block w-full rounded-lg bg-gray-100 mt-2">

                    <label class="text-black" for="question5">Avez-vous parlé à quelqu'un de vos sentiments ?</label>
                    <input type="text" id="question5" name="question5" class="block w-full rounded-lg bg-gray-100 mt-2">

                    <label class="text-black" for="question6">Avez-vous accompli certains de vos objectifs aujourd'hui ?</label>
                    <input type="text" id="question6" name="question6" class="block w-full rounded-lg bg-gray-100 mt-2">

                    <label class="text-black" for="question7">Avez-vous ressenti du stress aujourd'hui ?</label>
                    <input type="text" id="question7" name="question7" class="block w-full rounded-lg bg-gray-100 mt-2">

                    <label class="text-black" for="question8">Vous sentez-vous optimiste pour demain ?</label>
                    <input type="text" id="question8" name="question8" class="block w-full rounded-lg bg-gray-100 mt-2">

                    <!-- Ajoutez plus de questions au besoin -->
                    <button type="submit" class="mt-4 rounded-lg bg-indigo-600 px-8 py-3 text-white hover:bg-indigo-700">Soumettre</button>
                </form>


            </div>
        </div>

        {{ include('_footer.html.twig') }}
    </div>

{% endblock %}
